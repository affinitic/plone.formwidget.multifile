
<tal:WIDGET tal:define="portal_url view/portal/absolute_url">

  <script src="jquery.uploadify.js"
          type="text/javascript"
          tal:attributes="src string:$portal_url/++resource++jquery.uploadify.js">
  </script>
  <script src="jquery.uploadify.js"
          type="text/javascript"
          tal:attributes="src string:$portal_url/++resource++uploadify.swfobject.js">
  </script>
  <script src="multifile.js"
          type="text/javascript"
          tal:attributes="src string:$portal_url/++resource++multifile.js?xx4">
  </script>
  <link href="uploadify.css"
        rel="stylesheet"
        type="text/css"
        tal:attributes="href string:$portal_url/++resource++uploadify.css" />

  <div class="multi-file">

    <div tal:attributes="id view/get_uploader_id;
                         ref view/name"
         tal:omit-tag="not:view/editing"></div>

    <ul class="multi-file-files">
      <li tal:repeat="item view/get_value" class="multi-file-file">
        <img tal:condition="icon" src="" alt=""
             tal:define="icon item/icon"
             tal:attributes="src string:${context/portal_url}/$icon"/>
        <a tal:omit-tag="not:item/download_url"
           tal:attributes="href item/download_url">
          <span tal:condition="item/filename|nothing"
                tal:content="item/filename" />
        </a>
        <span class="discreet" tal:condition="item/size|nothing">
          &mdash;
          <tal:size replace="item/size" /> KB
          <tal:editing tal:condition="view/editing">
            &mdash;
            <a href="" class="multi-file-remove-file">remove</a>
          </tal:editing>
        </span>
        <input type="hidden"
               tal:attributes="name string:${view/name}:list;
                               value item/value" />
      </li>
    </ul>
  </div>

  <!-- uploadify javascript -->
  <script type="text/javascript"
          tal:content="structure view/get_inline_js">
  </script>

</tal:WIDGET>
