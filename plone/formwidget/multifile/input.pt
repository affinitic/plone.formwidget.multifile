
<tal:WIDGET tal:define="portal_url view/portal/absolute_url">

  <script src="jquery.uploadify.js"
          type="text/javascript"
          tal:attributes="src string:$portal_url/++resource++jquery.uploadify.js">
  </script>
  <script src="jquery.uploadify.js"
          type="text/javascript"
          tal:attributes="src string:$portal_url/++resource++uploadify.swfobject.js">
  </script>
  <script src="multifile.js"
          type="text/javascript"
          tal:attributes="src string:$portal_url/++resource++multifile.js?x8">
  </script>
  <link href="uploadify.css"
        rel="stylesheet"
        type="text/css"
        tal:attributes="href string:$portal_url/++resource++uploadify.css" />

  <div class="multi-file">

    <div tal:attributes="id view/get_uploader_id;
                         ref view/name"></div>

    <ul class="multi-file-files">
      <li tal:repeat="file view/value">
        <span tal:content="file/filename" />
        &mdash;
        <span class="discreet">
          <tal:size replace="python:round(file.getSize() / 1024)" /> KB
        </span>
        <input type="hidden"
               tal:attributes="name string:${view/name}:list;
                               value string:index${repeat/file/index}" />
      </li>
    </ul>
  </div>

  <!-- uploadify javascript -->
  <script type="text/javascript"
          tal:content="structure view/get_inline_js">
  </script>

</tal:WIDGET>
